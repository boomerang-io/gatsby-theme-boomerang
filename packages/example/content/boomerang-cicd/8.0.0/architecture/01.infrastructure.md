---
title: Infrastructure Architecture
index: 1
---

# Infrastructure architecture

The Boomerang CICD infrastructure is based on top of the IBM Services Essentials platform's [base infrastructure architecture](/boomerang/architecture/infrastructure-architecture).

In addition to this, Boomerang CICD also has some additional areas to be aware of.

## Boomerang CICD Workflows

Boomerang CICD workflows run as Kubernetes Jobs with ConfigMaps, Secrets, and Persistent Volumes. This has additional concerns to ensure you have enough capacity to meet the object requirements.

This is the default executor for running tasks.

### Jobs and Pods

When creating the Kubernetes Jobs a certain amount of disk, memory, and CPU is required to process the work. Our recommendation is to run these on dedicated nodes and to set the workers to automatically delete. This will ensure you have enough resources to continually execute new workers.

### Ephemeral storage

As with all containers, there is ephemeral storage used, which we have limited to 16GB by default. This impacts that number of workers that can be running in parallel, based on the amount of primary disk used. This is important.

CICD workers have a setting to delete completed workers. If this is not enabled, then the completed workers will remain and use up the available ephemeral storage.

See [Kubernetes ephemeral storage](https://kubernetes.io/docs/concepts/configuration/manage-compute-resources-container/#local-ephemeral-storage) reference information.

### Persistent volumes

There are different types of persistent volumes used by the worker orchestration system.

You can configure the storage size, storage class, and access modes for the following types in the Settings under Administer. By default:
- Storage Size is set to 1GB
- Storage Class is not set. This will therefore use the default defined in your kubernetes cluster
- Access Mode is set as Read Write Many.

**Workspaces**

The workspaces persistent volume is spun up per Boomerang CICD Component and is used as a persistent cache between executions. Whilst these do not churn nearly as often, they do add up i.e. if you have 100 Boomerang CICD Components you will have a requirement of 100GB (100 x xGB) of Persistent Storage available.

This is mapped to the `/workspace` mounted storage in the Tasks in a Workflow.

**Workflows**

The workflows persistent volume is per workflow execution and is used as a per execution storage. This can cause quite a churn of persistent volumes and can cause instability depending on the Storage driver you are using.

This is mapped to the `/workflow` mounted storage in the Tasks in a Workflow.

We recommend using [Ranchers Local Path Provisioner](https://github.com/rancher/local-path-provisioner) on the nodes executing Tasks as this allows for dynamic provisioning of local disk, that if SSD, allows for low latency high speed writes.

## IBM UrbanCode workers

IBM<sup>®</sup> UrbanCode<sup>®</sup> Deploy is an additional worker execution integration that is available, usually used for mobile-specific implementations.

- cloud native workers with IBM UrbanCode Deploy agents inside the container
- virtual machine-based workers dynamically spun up using Virtual Box
- tasks that run on legacy always available build services

There are specific requirements with this type of worker system, as well as additional infrastructure to host these extended types of workers outside of the Kubernetes world.
