---
title: Mode is Java
index: 04
---

# Java mode

The Boomerang CICD Java<sup>®</sup> mode compiles a Java archive. It can optionally encapsulate the built artifact into a Docker<sup>®</sup> container image, and store this image in the private, secure Boomerang Docker Registry.

To know more about Modes and Parameters:
- navigate to [Getting To Know Modes](/boomerang-cicd/getting-to-know/modes)
- navigate to [Getting To Know Parameters](/boomerang-cicd/getting-to-know/parameters)

## Parameters

The following summarizes the parameters that can be used in conjunction with `mode=java`. We recommend these be set at the `stage` or `version` property scope.

Here is a sample `.boomerang.yaml` file.

```
#General
mode=java
build-tool=maven|gradle|docker
build-tool-version=3.5|4.6
language-version=11

#Enable docker packaging
docker-enable=true|false
docker-file=./custom_directory/Dockerfile

#Override Tomcat deployment context path set on the environment
deploy-tomcat-path=/your/path
```

### Optional

```
# If you wish to override the Tomcat deployment context path set on the environment for Mode Java:

deploy-tomcat-path=/your/path
```

### Build tool

`build-tool=` tells Boomerang CICD what type of build script to apply. We currently support the following types:

|  **Build Tool**   | **Support** |                                                                **Useful For**                                                                |
| :---------------: | :---------: | :------------------------------------------------------------------------------------------------------------------------------------------ |
| `build-tool=maven`  |    full     |   Currently defines the use of Maven when compiling a Java microservice. A `mvn package` command will be run to compile the Java project.    |
| `build-tool=gradle` |    full     | Currently defines the use of Gradle when compiling a Java microservice. A `gradle assemble` command will be run to compile the Java project. |
| `build-tool=docker` |    full     |  Currently defines the use of Docker when compiling a Java microservice. A `docker build` command will be run to compile the Java project.   |

### Java language version

`language-version=` tells Boomerang CICD what version of the Java Development Kit will be installed for building and testing your components.

If this is not provided, it will default to Open JDK 8 for compiling and running unit tests.

## Prerequisites

### Build tool files

The required files for the respective build tools are required to be in the root directory.

- _Maven:_ `pom.xml`
- _Gradle:_ `build.gradle`
- _Docker:_ `Dockerfile`

## Docker

We currently support the following with Docker:

- Encapsulating a Maven or Gradle compiled artifact in a Docker container image
- Building a provided `Dockerfile` that compiles an artifact and encapsulates it in a Docker container image

### Parameters

If you have set `build-tool=docker` or `docker-enable=true`, a `Dockerfile` is required to be present in the root directory of the repository for the build to be successful.

### Container image

If you want to produce a Docker container that encapsulates a built artifact, you need to include a `Dockerfile`. Refer to the following example:

```
FROM openjdk:8-jre-alpine
VOLUME /tmp
EXPOSE 8080
ADD target/service.jar
RUN sh -c 'touch /service.jar'
ENV JAVA_OPTS=""
ENTRYPOINT [ "sh", "-c", "java $JAVA_OPTS -Djava.security.egd=file:/dev/./urandom -jar /service.jar" ]
```

### Multistage Builds

Our system supports multistage Dockerfiles. To learn more navigate to [Getting To Know Docker Mode](/boomerang-cicd/getting-to-know-for-modes/mode-is-docker)

## Constraints

### Docker port

For the out-of-the-box Boomerang CICD Docker pipeline, there are constraints on the exposed ports for the service. The port is `8080`.
